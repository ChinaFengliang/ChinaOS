/******************************************************Copyright (c)**************************************************
**                                              胆怯是阻止一切可能的根本缘由
**
**                                             E-Mail: ChinaFengliang@163.com
**
**---------File Information-------------------------------------------------------------------------------------------
** File name:            led.c
** Last version:         V1.00
** Descriptions:         指示灯驱动文件.
** Hardware platform:    lpc1768之pin(2.5)
** SoftWare platform:    ChinaOS
**
**--------------------------------------------------------------------------------------------------------------------
** Created by:           Fengliang
** Created date:         2010年10月13日  14:10:22
** Version:              V1.00
** Descriptions:         占用资源: pin 2.5
**
**--------------------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
** Version:
** Descriptions:
**
*********************************************************************************************************************/

/*********************************************************************************************************************
                                                    头文件区
*********************************************************************************************************************/
#include    <include/OS_macro.h>
#include    <include/OS_types.h>
#include    <libuary/ioport.h>
#include    "../../../lpc17xx.h"
#include    "./led2.h"

/*********************************************************************************************************************
                                                    宏定义区
*********************************************************************************************************************/
/* 宏段名 ----------------------------------------------------------------------------------------------------------*/



/*********************************************************************************************************************
                                                    类型定义区
*********************************************************************************************************************/
/* 基本类型 --------------------------------------------------------------------------------------------------------*/



/*********************************************************************************************************************
                                                  全局变量定义区
*********************************************************************************************************************/



/*********************************************************************************************************************
** Function name:           led_run_setup
** Descriptions:            安装指示灯
** Input parameters:        none
** Output parameters:       none
** Returned value:          ==OS_OK : 操作成功
**                          !=OS_OK : 操作失败(包含出错信息)
**--------------------------------------------------------------------------------------------------------------------
** Created by:              Fengliang
** Created Date:            2010-10-13  14:30:0
** Test recorde:
**--------------------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
** Test recorde:
*********************************************************************************************************************/
static STATUS led_run_setup(void)
{
	/* led D308 控制引脚: p2.5 */
	dword_clr_bits(PINSEL4, 3ul<<10);										/* 配置引脚p2.5功能: GPIO 				*/
	dword_set_bits(FIO2DIR, 1ul << 5);										/* 配置引脚p2.5方向: 输出				*/

    return OS_OK;
}

/*********************************************************************************************************************
** Function name:           led_run_on
** Descriptions:            打开指示灯
** Input parameters:        none
** Output parameters:       none
** Returned value:          none
**--------------------------------------------------------------------------------------------------------------------
** Created by:              Fengliang
** Created Date:            2010-10-13  14:30:35
** Test recorde:
**--------------------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
** Test recorde:
*********************************************************************************************************************/
static void led_run_on(void)
{
    write_dword(FIO2CLR, 1ul << 5);                                        	/* 打开指示灯                           */
}

/*********************************************************************************************************************
** Function name:           led_run_off
** Descriptions:            关闭指示灯
** Input parameters:        none
** Output parameters:       none
** Returned value:          none
**--------------------------------------------------------------------------------------------------------------------
** Created by:              Fengliang
** Created Date:            2010-10-13  14:30:43
** Test recorde:
**--------------------------------------------------------------------------------------------------------------------
** Modified by:
** Modified date:
** Test recorde:
*********************************************************************************************************************/
static void led_run_off(void)
{
    write_dword(FIO2SET, 1ul << 5);                                     	/* 关闭指示灯                           */
}

/*********************************************************************************************************************
                                                    设备定义区
*********************************************************************************************************************/
const CLASS_LED led2 =                                                  	/* 设备: 指示灯                         */
{
    led_run_setup,
    led_run_on,
    led_run_off,
};

/*********************************************************************************************************************
                                                    END OF FILE
*********************************************************************************************************************/

